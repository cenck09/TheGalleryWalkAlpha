@using Parse;
@using System.Threading;
@using System.Diagnostics;
@using TheGalleryWalk.Models;
@model IEnumerable<ParseObject>


<head>
    <link rel="stylesheet" href="~/Content/GalleryWalkStyles.css">

</head>
@if (Model != null)
{
    string name;
    Debug.WriteLine("Data is not null " + Model.Count());
    foreach (var item in Model)
    {
        GalleryEntity gallery = new GalleryEntity();
        gallery.parseID = item.ObjectId;
        gallery.Name = item.Get<string>("Name");
        gallery.EmailAddress = item.Get<string>("Email");
        gallery.phoneNumber = item.Get<string>("PhoneNumber");
        try
        {
            gallery.Artists = item.Get<IList<string>>("Artists");
        }
        catch (Exception ex)
        {
            gallery.Artists = new List<string>();
            Debug.WriteLine(ex);
        }

        try
        {
            gallery.Artworks = item.Get<IList<string>>("Artworks");
        }
        catch (Exception ex)
        {
            gallery.Artworks = new List<string>();
            Debug.WriteLine(ex);
        }
        gallery.ArtistAdd = new ArtistEntity();
        gallery.ArtworkAdd = new ArtworkEntity();

        name = item.Get<string>("Name");
        <a  href="@Url.Action("GalleryView","Gallery", gallery)">
            <div class="GalleryInfoWindow" style="margin:10px">
                <img src="/Content/demoImages/demoGallery.jpg" alt="demo Gallery" style="width:auto; border-radius:4px; height:auto;" />
                <p style="margin-top:8px; color:white; text-shadow: 0px 0px 4px rgba(0,0,0,0.4)">@Html.Raw(name)</p>
            </div>
        </a>
    }
}
